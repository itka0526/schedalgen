# Интеллектуальная Система Составления Расписаний

Интеллектуальная Система Составления Расписаний (ИССР) представляет собой 
программу, пользующую генетические алгоритмы, построенные на базе [DEAP](https://github.com/DEAP/deap), 
а так же некоторые инструменты парсинга и сериализации, реализованные "с нуля" 
для составления расписания работы гипотетического университета.

## Структура таблицы расписания

Высшим индексом в таблице является номер группы. Для каждой группы составлено 
расписание на две недели (каждая по 6 дней). В каждый из дней может быть 
проведено до 8 пар.

Структура таблицы расписания выглядит следующим образом в формате JSON:
```ts
{
    "group-1": {
        "week-1": {
            "day-1": {
                "class-1": {
                    "classroom": 256,
                    "teacher": 52,
                    "type": 1,
                },
                ...
            },
            ...
        },
        "week-2": {
            ...
        },
    },
    ...
}
```

Каждая пара, обозначаемая как `class-n` определяется дескриптором.

## Устройство дескриптора пары

Дескриптор пары суть единица данных, кодирующая информацию о паре для алгоритма.
Он представляет собой бинарную строку следующего вида:
```
00000000|00000000|0000000|0
```

Интерпретировать её нужно так (все пограничные значения включены в промежутки):
- Биты с 0 по 7 кодируют группу;
- Биты с 8 по 15 кодируют аудиторию;
    - Аудитории с номерами от 1 до 127 являются лекториями;
    - Аудитории с номерами от 128 до 255 являются семинариями;
        - Аудитории с номерами от 128 до 192 не есть компьютерные классы;
        - Аудитории с номерами от 192 до 255 суть компьютерные классы;
- Биты с 16 по 21 кодируют преподавателя;
    - **TODO:** Организовать сепарацию по кафедрам; 
- Последний (23) бит является индикатором того, является пара лекцией (0) или семинаром (1).

Рассмотрим на примере, что из себя представляет строка 
`00101101|01001100|1001010|1`.
Если будем по очереди переводить каждый кусочек в десятичную систему и 
интерпретировать его в соответствии с вышеописанными правилами, получим, что 
обозреваемая строка кодирует семинар у группы 45 в аудитории 76 с 
преподавателем 74.

## Ограничения

На данный момент строгими ограничениями (hard constraints) являются следующие 
пункты:
- В одной аудитории одновременно не может находиться больше 1 преподавателя;
- В аудитории для лекций не может проходить семинар и наоборот;
- В одной аудитории не может проходить пара у групп с разных потоков;

Эти ограничения являются нестрогими (soft constraints):
- На лекции в одной аудитории не могут находиться более, чем 4 группы;
- На семинаре в одной аудитории не могут находиться более, чем 2 группы;
- На неделе у одной группы не может быть больше двух лекций и двух практик по одному предмету;
- Количество пар проводимых в день не должно быть меньше двух или больше пяти.

Конечно, есть некоторые ограничения, которые находятся в разработке, однако уже 
сейчас модель задачи имеет приемлемый вид.
